@import '../prelude';

.json-filter-editor {
    --editor-background: @card-background;
    --editor-selection: fade(#fff, 35%);
    --editor-line-number: #aaa;
    --editor-text: #ddd;
    --editor-syntax-string: @secondary;
    --editor-syntax-atom: #e95;
    --editor-syntax-number: #e95;
    --editor-syntax-property: #f5a;
    --editor-syntax-comment: #999;
    --editor-error: @error;
    --editor-error-background: @error-fade-20;
    --editor-match: #9ce;

    --editor-template-background: fade(#75f, 40%);
    --editor-template-delimiter: #77f;

    position: relative;
    max-width: 800px;
    margin: 16px auto;

    .CodeMirror.cm-s-akso {
        font-family: @monospace;
        font-size: 12px;
        background: var(--editor-background);
        color: var(--editor-text);

        .CodeMirror-cursor {
            border-left-color: var(--editor-text);
        }
        .CodeMirror-selected {
            background: var(--editor-selection);
        }
        .CodeMirror-gutters {
            background: var(--editor-background);
            border-right-color: transparent;
        }
        .CodeMirror-linenumber {
            color: var(--editor-line-number);
            font-size: 0.8em;
            margin-top: 0.25em;
        }
        .CodeMirror-nonmatchingbracket {
            color: var(--editor-error);
        }
        .CodeMirror-matchingbracket {
            color: var(--editor-match);
        }

        .cm-property { color: var(--editor-syntax-property); }
        .cm-string { color: var(--editor-syntax-string); }
        .cm-atom { color: var(--editor-syntax-atom); }
        .cm-number { color: var(--editor-syntax-number); }
        .cm-comment { color: var(--editor-syntax-comment); }

        .json-error-line {
            background: var(--editor-error-background);
        }
        .json-error-message {
            font-family: Roboto, sans-serif; // FIXME: hardcoded font
        }

        .cm-akso-template {
            background: var(--editor-template-background);

            .cm-invalidchar[title="\\u91"] {
                display: inline-block;
                color: transparent;
                width: 2px;
                background: var(--editor-template-delimiter);
                border-radius: 1px;
            }
        }
    }

    .json-editor-help-button {
        position: absolute;
        top: 8px;
        right: 8px;
        z-index: 10;
        --md-button-color: var(--editor-text);
        transition: transform 0.4s @easing;
    }

    &.collapsed {
        .CodeMirror {
            height: 64px;
        }

        .json-editor-help-button {
            transform: scale(0);
            transition: none; // due to the way PaperList works the animation is kinda jarring
        }
    }
}
